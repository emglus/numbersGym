<!-- Enter your HTML code here -->
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Numbers Gym</title>
        <link rel="stylesheet" href="css/index.css" type="text/css">
        <link rel="stylesheet" href="css/w3.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
        <style type="text/css">
        </style>
    </head>
    <body>
        <script src="js/members.js" type="text/javascript"></script>
        <script>
            initMembers()
        </script>
        <script src="js/index.js" type="text/javascript"></script>
        <header class="w3-margin">
            <div class="w3-container w3-teal">
                <h1>Числовой Спортзал</h1>
                <p>Курс для юных математиков</p>
            </div>
        </header>
        <nav class="w3-margin">
            <div class="w3-bar w3-teal">
                <a href="index.html" class="w3-bar-item w3-button">На главную</a>
                <a href="contents.html" class="w3-bar-item w3-button">Содержание</a>
                <a href="quiz.html" class="w3-bar-item w3-button">Упражнения</a>
                <a href="about.html" class="w3-bar-item w3-button">Инструкции</a>
            </div>
        </nav>
        <main class="w3-margin">
            <div class="box t1">
                <h3>Участники</h3>
                <table id="memberList">
                    <tr>
                        <th>Имя</th>
                        <th>Уровень</th>
                    </tr>
                </table>
                <script>
                    updateMemberList()
                </script>
            </div>
            <div class="box t2">
                <h3>Регистрация новых участников</h3>
                <div>
                    <div class="row">
                        <label for="username">Имя:</label>
                    </div>
                    <div class="row">
                        <input type="text" name="username" id="username">
                    </div>
                    <div class="row">
                        <button id="add" type="submit" class="ng-button-small-red">Зарегистрируйся</button>
                    </div>
                    <script>
                        let add = document.getElementById("add")
                        add.addEventListener("click", function() {
                            let inp = document.getElementById("username")
                            let name1 = inp.value
                            if (name1.length === 0 ) {
                                alert("Пожалуйста введите имя участника")
                            } else if   (name1.length > 12 ) {
                                alert("Максимум 12 букв")
                            } else{
                                if (memberNameAlreadyExists(name1)) {
                                    alert("Имя участника " + name1 + " уже введено\nВведите другое имя")
                                } else {
                                    addMember(name1)
                                    updateMemberList()
                                }
                            }
                        })
                    </script>
                </div>
            </div>
    
        </main>

        <script>
            // add event listeners to record the name of curret member
            // when the member is selected in the left panel
            if (members.length > 0) {
                var buttons = document.getElementsByClassName("ng-button-small")
                for (let i = 0; i < buttons.length; i++) {
                    buttons[i].addEventListener("click", function() {
                        let name1 = buttons[i].innerHTML;
                        localStorage.setItem('current', name1);
                        localStorage.setItem('runLevel', getLevelByMemberName(name1))
                        window.location.href = "quiz.html";
                    })
                }
            }
        </script>
    </body>
</html>
